{% extends 'base.html' %} {% block title %} Upload Documents {% endblock title %} {% load static %} {% block gallerycss %}
<link href="{% static 'css/gallery.css' %}" rel="stylesheet" />
{% endblock %} {% block body %}

<div class="col-md-12">
  <form
    id="TypeValidation"
    class="form-horizontal"
    method="post"
    novalidate="novalidate"
    enctype="multipart/form-data"
  >
    {% csrf_token %}
    <div class="card">
      <div
        class="card-header card-header-rose card-header-text"
        style="font-size: 20px"
      >
        <div class="card-text" style="padding-left: 1px">
          <a href="" class="card-header card-header-rose card-header-text">
            <i class="material-icons">cloud_upload</i> Upload Documents
          </a>
        </div>
      </div>

      <div class="card-body">
        <div class="row">
          <label class="col-sm-2 col-form-label" for="PayType"
            >Select Documents*</label
          >
          <div class="col-sm-4">
            <div class="form-group bmd-form-group">{{ form.doc_type }}</div>
            <small class="text-muted">Upload both front and back for each document</small>
          </div>
       
          <div class="col-sm-3" style="display: none">
            <input
              type="hidden"
              name="{{ form.tenant.name }}"
              value="{{ tenant.pk }}"
            />
          </div>

          <div class="col-sm-3">
            <button
              class="btn btn-rose btn-round btn-sm"
              type="button"
              onclick="document.getElementById('imageUpload').click()"
            >
              <i class="material-icons">open_in_browser </i> Browse File
              <div class="ripple-container"></div>
            </button>
            <input
              type="file"
              name="image"
              id="imageUpload"
              style="display: none"
              class="upload_files"
              data-import-url="{% url 'upload_documents' request.user.username %}"
              multiple
            />
          </div>
          <div class="col-sm-3">
            <button
              class="btn btn-rose btn-round btn-sm float-right ml-auto"
              type="Submit"
            >
              <i class="material-icons">near_me </i> Submit
              <div class="ripple-container"></div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="card imagePreviewIcon">
      <div class="card-body">
        <div class="row staged-docs">
        </div>
      </div>
    </div>

  </form>

  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-md-12">
          <div class="card-body">
            <div class="material-datatables">
              <table
                id="datatables"
                class="table table-striped table-no-bordered table-hover"
                cellspacing="0"
                width="100%"
                style="width: 100%"
              >
                <thead>
                  <tr>
                    <th>Document Type</th>
                    <th>File Name</th>
                    <th>Size</th>
                    <th>Status</th>
                    <th>File Progress</th>
                  </tr>
                </thead>
                <tbody>
                  {% if uploaded_documents %} {% for uploaded_document in uploaded_documents %}
                  <tr>
                    <td scope="row">{{ uploaded_document.doc_type.docs_type.upper }}</td>
                    <td class="doc-name">{{ uploaded_document.image.name.upper }}</td>
                    <td>{{ uploaded_document.image.size }} KB</td>
                    <td>
                    {% if uploaded_document.is_verified %}
                      <span class="badge badge-success">Approved</span>
                    {% else %}
                    <span class="badge badge-warning">Pending</span>
                    {% endif %}
                    </td>
                    <td>100%</td>
                  </tr>
                  {% endfor %} {% else %} 
                  <tr>
                    <td colspan="5" class="text-center">No documents uploaded yet</td>
                  </tr> 
                  {% endif %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <h4 class="card-header" style="font-weight: 600; text-transform: uppercase;">Uploaded Documents</h4>
   
    <div class="card-body shadow">
      <div class="row">
        {% for uploaded_document in uploaded_documents %}
        
        {% if uploaded_document.is_verified %}
        <div class="col-md-5 text-center mx-auto">
          <h6 class="card-title py-3" style="font-weight: 600; text-transform: uppercase">{{ uploaded_document.doc_type }}</h6>
          <div class="uploaded-docs" style="height: 250px; box-shadow: 1px 1px 6px black;margin-bottom: 2em;
          background-image: url('{{ uploaded_document.image.url }}'); background-size: cover; border-radius: 7px;">
          </div>
        </div>
        {% endif %}
        
        {% endfor %}
      </div>

    </div>
  </div>
</div>
<script src="{% static 'js/cropImage.js' %}"></script>

{% endblock body %}
