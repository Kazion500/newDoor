{% extends 'base.html' %} {% load static %} {% load humanize %} {% block title %} Payment {% endblock title %} {% block body %}
{% if amount_remained.amount_remained == 0 %}
<div class="alert alert-info mt-3 p-3">
  You have completed you payments click <a href="{% url 'tenant_dashboard' %}"><b style="font-weight: 600;" class="text-dark">Here</b> to go back to the dashboard</a>
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <i class="material-icons">close</i>
  </button>
  <span> </span>
</div>
{% endif %}
<div class="col-md-12">
  <form
    id="payment-form"
    class="form-horizontal"
    method="post"
    novalidate="novalidate"
  >
    {% csrf_token %}
    <div class="card">
      <div
        class="card-header card-header-rose card-header-text"
        style="font-size: 20px"
      >
        <div class="card-text" style="padding-left: 1px">
          <a
            href=" {% url 'payment' request.user.username %} "
            class="card-header card-header-rose card-header-text"
          >
            <i class="material-icons">payment</i> Payment
          </a>
        </div>
      </div>

      <div class="card-body">
        {% comment %} Row1 {% endcomment %}
        <div class="col-md-12">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title text-center my-2">
                <b style="text-transform: uppercase">Select a payment method</b>
              </h4>
            </div>
            <div class="card-body">
              <div class="row p-0">
                <div class="col-md-3">
                  <ul
                    class="nav nav-pills nav-pills-rose flex-column"
                    role="tablist"
                    style="
                      background-color: rgb(245, 245, 245);
                      padding: initial;
                    "
                  >
                    <li class="nav-item">
                      <a
                        class="nav-link active show"
                        data-toggle="tab"
                        href="#link4"
                        role="tablist"
                        style="
                          border-radius: 0px;
                          height: 60px;
                          font-size: 15px;
                          padding-top: 5.126;
                          padding-top: 18px;
                        "
                      >
                        CREDIT/ DEBIT CARDS
                      </a>
                    </li>
                    <li class="nav-item">
                      <a
                        class="nav-link"
                        data-toggle="tab"
                        href="#link5"
                        role="tablist"
                        style="
                          border-radius: 0px;
                          height: 60px;
                          font-size: 15px;
                          padding-top: 5.126;
                          padding-top: 18px;
                        "
                      >
                        CASH
                      </a>
                    </li>
                    <li class="nav-item">
                      <a
                        class="nav-link"
                        data-toggle="tab"
                        href="#link6"
                        role="tablist"
                        style="
                          border-radius: 0px;
                          height: 60px;
                          font-size: 15px;
                          padding-top: 5.126;
                          padding-top: 18px;
                        "
                      >
                        NET BANKING
                      </a>
                    </li>
                    <li class="nav-item">
                      <a
                        class="nav-link"
                        data-toggle="tab"
                        href="#link6"
                        role="tablist"
                        style="
                          border-radius: 0px;
                          height: 60px;
                          font-size: 15px;
                          padding-top: 5.126;
                          padding-top: 18px;
                        "
                      >
                        PAYPAL/ PAYZAPP/ PAYTM
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="col-md-5">
                  <div class="tab-content">
                    <div class="tab-pane active show" id="link4">
                      <h4><b>CREDIT/ DEBIT CARDS</b></h4>
                      Card Number
                      <div class="row">
                        <!-- <label class="col-sm-2 col-form-label" for="OccupancyType">Card Number*</label> -->
                        <div class="col-sm-12">
                          <div class="form-group bmd-form-group">
                            <div id="card-element">
                              <!-- A Stripe Element will be inserted here. -->
                            </div>
                          </div>
                        </div>
                      </div>
                      Name on card*
                      <div class="row">
                        <!-- <label class="col-sm-2 col-form-label" for="OccupancyType">Card Number*</label> -->
                        <div class="col-sm-12">
                          <div class="form-group bmd-form-group">
                            <input
                              class="form-control"
                              type="text"
                              id="fullname"
                              name="fullname"
                              required="true"
                              aria-required="true"
                            />
                          </div>
                        </div>
                      </div>
                      Email*
                      <div class="row">
                        <!-- <label class="col-sm-2 col-form-label" for="OccupancyType">Card Number*</label> -->
                        <div class="col-sm-12">
                          <div class="form-group bmd-form-group">
                            <input
                              class="form-control"
                              type="text"
                              id="email"
                              name="email"
                              required="true"
                              aria-required="true"
                            />
                          </div>
                        </div>
                      </div>
                      <!-- Expire date* -->
                      <!-- <div class="row">
                        <div class="col-sm-2">
                          <div class="form-group bmd-form-group">
                            <input
                              class="form-control"
                              type="text"
                              id="OccupancyType"
                              placeholder="Enter date"
                              name="OccupancyType"
                              required="true"
                              aria-required="true"
                            />
                          </div>
                        </div>

                        <div class="col-sm-3">
                          <div class="form-group bmd-form-group">
                            <select
                              input
                              class="form-control"
                              type="text"
                              id="month"
                              name="month"
                              required="true"
                              aria-required="true"
                            >
                              <option selected>Select Month</option>
                              <option>2021</option>
                              <option>2022</option>
                              <option>2023</option>
                              <option>2024</option>
                              <option>2025</option>
                              <option>2026</option>
                              <option>2027</option>
                              <option>2027</option>
                              <option>2028</option>
                              <option>2029</option>
                              <option>2030</option>
                              <option>2031</option>
                              <option>2032</option>
                              <option>2033</option>
                              <option>2034</option>
                              <option>2035</option>
                              <option>2036</option>
                              <option>2037</option>
                            </select>
                          </div>
                        </div>
                      </div> -->

                      <!-- CVV* -->
                      <!-- <div class="row">
                        
                        <div class="col-sm-2">
                          <div class="form-group bmd-form-group">
                            <input
                              class="form-control"
                              type="text"
                              id="OccupancyType"
                              name="OccupancyType"
                              required="true"
                              aria-required="true"
                            />
                          </div>
                        </div>
                        <i class="material-icons">help</i>
                        <p>
                          Last three digits printed on the back of the card.
                        </p>
                      </div> -->
                    </div>
                    <div class="tab-pane" id="link5">
                      Efficiently unleash cross-media information without
                      cross-media value. Quickly maximize timely deliverables
                      for real-time schemas.
                      <br />
                      <br />Dramatically maintain clicks-and-mortar solutions
                      without functional solutions.
                    </div>
                    <div class="tab-pane" id="link6">
                      Completely synergize resource taxing relationships via
                      premier niche markets. Professionally cultivate one-to-one
                      customer service with robust ideas.
                      <br />
                      <br />Dynamically innovate resource-leveling customer
                      service for state of the art customer service.
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <h4><b>Payment Details</b></h4>
                  <div class="payment-details d-flex">
                    <div class="payment-details-left">
                      <ul class="mx-2 p-0">
                        <li><b>Amount to be paid</b></li>
                        <!-- <li><b>Discount</b></li> -->
                        <li><b>Any Other</b></li>
                      </ul>
                    </div>
                    <div class="payment-details-right">
                      <ul>
                        <li class="text-success"> 
                          {% if amount_remained.amount_remained == 0 %}
                          <b>$0.00</b>
                          {% else %}
                          <b>${{ final_amount|intcomma }}</b>
                          {% endif %}
                        </li>
                        <li class="text-danger">$0.00</li>
                      </ul>
                    </div>
                  </div>
                  <hr class="mt-0" />
                  <div
                    class="total-payment-amount d-flex"
                  >
                    <div class="total-payment-amount-left">
                      <ul class="ml-2 mr-4 p-0">
                        <li><b>Total Amount</b></li>
                      </ul>
                    </div>
                    <div class="total-payment-amount-right">
                      <ul class="ml-2">
                        <li id="total-amount">
                          {% if amount_remained.amount_remained == 0 %}
                          <b>$0.00</b></li>
                          {% else %}
                          <b>${{ final_amount|intcomma }}</b>
                          {% endif %}
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% comment %} Row5 end {% endcomment %}
        <br />
        
        <button class="btn btn-rose btn-round float-right"  {% if amount_remained.amount_remained == 0 %} style="display: none;" {% endif %} data-toggle="modal" data-target="#deleteToggle" type="button">
          <i class="material-icons">near_me </i> Submit
          <div class="ripple-container"></div>
        </button>
        <button type="submit" id="acceptTriggerSubmit" style="display: none;" class="close p-3" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    </div>
  </form>
  <!-- Modal -->
  <div class="modal fade" id="deleteToggle" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-top" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" style="font-weight: 600; text-transform: uppercase;" id="exampleModalLongTitle">Make Payment</h4>
          <button type="button" class="close p-3" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          {% if amount_remained.amount_remained == 0 %}
          You can't make payments because you have paid in full
          {% else %}
          Are you sure you want to make a payment of <span style="font-weight: 600; color: red;">${{ final_amount|intcomma }}</span>?
          {% endif %}
          
        </div>
        {% if amount_remained.amount_remained != 0 %}
        <div class="modal-footer">
          <button type="button" class="btn btn-info px-5 py-2" data-dismiss="modal">No</button>
          <button type="button" id="triggerSubmit" class="btn btn-success ml-3 px-5 py-2" data-dismiss="modal">Yes</button>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
<script src="https://js.stripe.com/v3/"></script>
{% block payment %}
<script src="{% static 'js/payment.js' %}"></script>
{% endblock %}
{% endblock body %}
